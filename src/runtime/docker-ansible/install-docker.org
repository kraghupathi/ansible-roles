#+TITLE: Install Docker
#+AUTHOR: VLEAD
#+DATE: [2018-09-12 Wed]
#+SETUPFILE: ../../org-templates/level-2.org
#+TAGS: boilerplate(b)
#+EXCLUDE_TAGS: boilerplate
#+OPTIONS: ^:nil

* Intorduction
  This is an ansible playbook for installing docker on desired
  hosts. We can choose the version of docker from the vars/main.yml in
  the role.
* Install Docker
  To install docker we need a playbook which uses the role called
  'docker-install' already present in the roles directory of this
  repository. To install docker in the target host please follow these
  steps.

** Pull docker image
#+BEGIN_EXAMPLE
docker pull akashkaveti/docker-ansible
#+END_EXAMPLE

** Start the container by volume mounting the code of this repository
#+BEGIN_EXAMPLE
docker run -v /path/to/this/repo:/data -it akashkaveti/docker-ansible 
#+END_EXAMPLE
** Execute the playbook
#+BEGIN_EXAMPLE
cd /data ; ansible-playbook -i host-ip --user=username -k -K install-docker.yml
#+END_EXAMPLE
#+NAME: docker-install
#+BEGIN_SRC yaml
---
- hosts: rancher-master
  become: yes
  roles:
    - docker-install
#+END_SRC

* Tangle
#+BEGIN_SRC yaml :tangle install-docker.yml :eval no :noweb yes
<<docker-install>>
#+END_SRC

